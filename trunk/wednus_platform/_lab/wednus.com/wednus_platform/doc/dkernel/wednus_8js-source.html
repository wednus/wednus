<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Wednus DKernel: wednus.js Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>wednus.js</h1><a href="wednus_8js.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00024"></a><a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">00024</a> var <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a> = {
<a name="l00025"></a>00025     <span class="comment">// reserved namespace for control specific variables</span>
<a name="l00026"></a>00026     c: {},
<a name="l00027"></a>00027     <span class="comment">// the absolute path where platform installed</span>
<a name="l00028"></a>00028     path: '',
<a name="l00029"></a>00029     <span class="comment">// list of the default namespaces  under 'window' (comma splited)</span>
<a name="l00030"></a>00030     names: '',
<a name="l00031"></a>00031     <span class="comment">// pool for registered event listeners</span>
<a name="l00032"></a>00032     events: {},
<a name="l00033"></a>00033     <span class="comment">// pool for the names of loaded modules</span>
<a name="l00034"></a>00034     modules: {'<a class="code" href="group__wml.html#g3a499d5411d0ba18cb2ae3d0d62b0c0c">module</a>':[], '<a class="code" href="group__wml.html#gd0487965a554c6fae9596dbabf5d0fba">control</a>':[], '<a class="code" href="group__wml.html#gccdc4e1dcdf70fd2eeacf4bda910d91a">include</a>':[]},
<a name="l00035"></a>00035     <span class="comment">// pool for backuped namespaces</span>
<a name="l00036"></a>00036     namespaces: {},
<a name="l00037"></a>00037     <span class="comment">// script confliction checker place holder</span>
<a name="l00038"></a>00038     <a class="code" href="group__wed.html#g05000bbf397fca60d64dc0e003371327">check_namespace</a>: function(){}
<a name="l00039"></a>00039 };
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00057"></a><a class="code" href="group__wml.html#gceef6ecf9035210796f48f9fb6687f69">00057</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.css = function(subpath, name){
<a name="l00058"></a>00058     document.write('&lt;link href=<span class="stringliteral">"'+ this.path + subpath +'/'+ name +'.css'</span>
<a name="l00059"></a>00059 <span class="stringliteral">        +'"</span> rel=<span class="stringliteral">"stylesheet"</span> type=<span class="stringliteral">"text/css"</span> /&gt;');
<a name="l00060"></a>00060 };
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 
<a name="l00070"></a><a class="code" href="group__wml.html#g4a379d3a6983d96fc59e953a861c1121">00070</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.js = function(url){
<a name="l00071"></a>00071     document.write('&lt;script type=<span class="stringliteral">"text/javascript"</span> src=<span class="stringliteral">"'+ url +'"</span>&gt;&lt;\/script&gt;');
<a name="l00072"></a>00072 };
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 
<a name="l00087"></a><a class="code" href="group__wml.html#g684e8016b5ac27b788d63f2bbc042bd2">00087</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.load = function(subpath, name, lib){  <span class="comment">// script loader</span>
<a name="l00088"></a>00088     name = name.split(<span class="charliteral">','</span>);
<a name="l00089"></a>00089     <span class="comment">// do batch load when name is a comma seperated list</span>
<a name="l00090"></a>00090     <span class="keywordflow">if</span>(name.length != 1){
<a name="l00091"></a>00091         <span class="keywordflow">for</span>(var i = 0; i &lt; name.length; ++i)
<a name="l00092"></a>00092             <span class="keyword">this</span>.<a class="code" href="group__wml.html#g684e8016b5ac27b788d63f2bbc042bd2">load</a>(subpath, name[i], lib);
<a name="l00093"></a>00093         <span class="keywordflow">return</span>;
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <span class="comment">// register only when its not loaded yet</span>
<a name="l00097"></a>00097     <span class="keywordflow">if</span>(getIndex(lib, name) != -1){
<a name="l00098"></a>00098         <span class="keywordflow">return</span>;
<a name="l00099"></a>00099     }<span class="keywordflow">else</span> <span class="keyword">this</span>.modules[lib][<span class="keyword">this</span>.modules[lib].length] = name +'';
<a name="l00100"></a>00100     <span class="comment">// load module</span>
<a name="l00101"></a>00101     <span class="keyword">this</span>.js(<span class="keyword">this</span>.path + subpath + <span class="charliteral">'/'</span>+ name +'.<a class="code" href="group__wml.html#g4a379d3a6983d96fc59e953a861c1121">js</a>');
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     function getIndex(lib, name){
<a name="l00104"></a>00104         <span class="comment">// search previous loading</span>
<a name="l00105"></a>00105         <span class="keywordflow">for</span>(var i = 0; i &lt; <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.modules[lib].length; ++i)
<a name="l00106"></a>00106             <span class="keywordflow">if</span>(<a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.modules[lib][i] == name)
<a name="l00107"></a>00107                 <span class="keywordflow">return</span> i;
<a name="l00108"></a>00108         <span class="keywordflow">return</span> -1;
<a name="l00109"></a>00109     };
<a name="l00110"></a>00110 };
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 
<a name="l00137"></a><a class="code" href="group__wml.html#g3a499d5411d0ba18cb2ae3d0d62b0c0c">00137</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.module = function(name){
<a name="l00138"></a>00138     <span class="keyword">this</span>.load('<a class="code" href="group__wml.html#g3a499d5411d0ba18cb2ae3d0d62b0c0c">module</a>', name, '<a class="code" href="group__wml.html#g3a499d5411d0ba18cb2ae3d0d62b0c0c">module</a>');
<a name="l00139"></a>00139 };
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 
<a name="l00153"></a><a class="code" href="group__wml.html#gd0487965a554c6fae9596dbabf5d0fba">00153</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.control = function(name){
<a name="l00154"></a>00154     <span class="keyword">this</span>.load('<a class="code" href="group__wml.html#gd0487965a554c6fae9596dbabf5d0fba">control</a>/'+ name, name, '<a class="code" href="group__wml.html#gd0487965a554c6fae9596dbabf5d0fba">control</a>');
<a name="l00155"></a>00155 };
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 
<a name="l00167"></a><a class="code" href="group__wml.html#gccdc4e1dcdf70fd2eeacf4bda910d91a">00167</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.include = function(subpath, name){
<a name="l00168"></a>00168     <span class="keyword">this</span>.load(subpath, name, '<a class="code" href="group__wml.html#gccdc4e1dcdf70fd2eeacf4bda910d91a">include</a>');
<a name="l00169"></a>00169 };
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 
<a name="l00203"></a><a class="code" href="group__wes.html#gc6f7355b5c21e2f7ef8bfca4eac33e7d">00203</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.event = function(source, <a class="code" href="group__wes.html#gc6f7355b5c21e2f7ef8bfca4eac33e7d">event</a>, func, arg1){
<a name="l00204"></a>00204     var task;
<a name="l00205"></a>00205     <span class="comment">// create a new library for this object if there no exist yet.</span>
<a name="l00206"></a>00206     <span class="keywordflow">if</span>(!<a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.events[source])
<a name="l00207"></a>00207         <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.events[source] = {};
<a name="l00208"></a>00208     <span class="keywordflow">if</span>(!<a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.events[source][<a class="code" href="group__wes.html#gc6f7355b5c21e2f7ef8bfca4eac33e7d">event</a>]){
<a name="l00209"></a>00209         <span class="comment">// create a new library for this event if there no exist yet.</span>
<a name="l00210"></a>00210         <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.events[source][event] = [];
<a name="l00211"></a>00211         <span class="comment">// extend the original event handler</span>
<a name="l00212"></a>00212         source[event] = function(){
<a name="l00213"></a>00213             <span class="comment">// execute reserved tasks</span>
<a name="l00214"></a>00214             <span class="keywordflow">for</span>(var i = 0; i &lt; <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.events[source][event].length; ++i){
<a name="l00215"></a>00215                 task = <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.events[source][event][i];
<a name="l00216"></a>00216                 <span class="comment">// BUG: Error on firefox, onresize</span>
<a name="l00217"></a>00217                 task[0](task[1]);
<a name="l00218"></a>00218             }
<a name="l00219"></a>00219         };
<a name="l00220"></a>00220     }
<a name="l00221"></a>00221     <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.events[source][<a class="code" href="group__wes.html#gc6f7355b5c21e2f7ef8bfca4eac33e7d">event</a>][<a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.events[source][<a class="code" href="group__wes.html#gc6f7355b5c21e2f7ef8bfca4eac33e7d">event</a>].length] = [func, arg1];
<a name="l00222"></a>00222 };
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 function(){
<a name="l00230"></a>00230     <span class="comment">// build default namespace library</span>
<a name="l00231"></a>00231     <span class="keywordflow">for</span>(var i in window)
<a name="l00232"></a>00232         <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.names += i +<span class="charliteral">','</span>;
<a name="l00233"></a>00233     <span class="comment">// get installation path</span>
<a name="l00234"></a>00234     var scripts = document.getElementsByTagName('script');
<a name="l00235"></a>00235     <span class="keywordflow">for</span>(var i = 0; i &lt; scripts.length; ++i){
<a name="l00236"></a>00236         <span class="keywordflow">if</span>(scripts[i].src.match(/\bwednus\.js$/i)){
<a name="l00237"></a>00237             <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.path = scripts[i].src.substring(0, scripts[i].src.lastIndexOf(<span class="charliteral">'/'</span>) + 1);
<a name="l00238"></a>00238             <span class="keywordflow">break</span>;
<a name="l00239"></a>00239         }
<a name="l00240"></a>00240     }
<a name="l00241"></a>00241 };
<a name="l00243"></a>00243 
<a name="l00245"></a>00245 
</pre></div><hr size="1"><address style="align: right;"><small>name of web programming challenges. . .&nbsp;
<a href="http://wednus.com">Wednus Project</a></small></address>
