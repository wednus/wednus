<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Test - wednus.js</title>
<script type='text/javascript' src='../wednus.js'></script>
<script type='text/javascript'>
W.module('debug');	// W.test, W.Timer
</script>

<script type='text/javascript'>
W.event(window, 'onload', parse);

function parse(){
    var timer = new W.Timer();
    var tmp = W.$('code').value;
    timer.start();
    var W2 = eval(tmp);
    W.test(typeof W2.js == 'function', 'W construction time from string');
    timer.finish();
}
</script>
</head>
<body>
<textarea id='code' style='width:100%;height:400px;display:none;'>
({
    path:"file:///C:/Documents%20and%20Settings/sundew/workspace/wednus_platform/",
    version:"0.1.0_pre12",
    root:{},
    modules:{},
    $:function(id){return document.getElementById(id);},
    css:function(url){document.write("<link href=\""+url+"\" rel=\"stylesheet\" type=\"text/css\">");document.close();},
    js:function(url){document.write("<script type='text/javascript' src='"+ url +"'><\/script>");},
    load:function(subpath,name,lib){lib=lib?lib:"include";if(!this.modules[lib]){this.modules[lib]=[];}name=name.split(",");if(name.length!=1){for(var i=0;i<name.length;++i){this.load(subpath,name[i],lib);}return;}if(getIndex(lib,name)!=-1){return;}else{this.modules[lib][this.modules[lib].length]=name+"";}this.js(this.path+subpath+"/"+name+".js");function getIndex(lib,name){for(var i=0;i<W.modules[lib].length;++i){if(W.modules[lib][i]==name){return i;}}return-1;}},
    autopath:function(){if(document.getElementsByTagName){if(this.path!=""){return;}var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;++i){if(scripts[i].src.match(/\bwednus\.js$/i)||scripts[i].src.match(/\bwednus_compact\.js$/i)){W.path=scripts[i].src.substring(0,scripts[i].src.lastIndexOf("/")+1);break;}else{if(scripts[i].src.match(/\bwednus\.js\?only$/i)){W.path=scripts[i].src.substring(0,scripts[i].src.lastIndexOf("/")+1);return false;}}}}else{if(this.path==""){alert("This browser does not support the basic DOM level1.\nTo support this browser,the author of this page needs to set\"W.path\" to the installation path(URL)of Wednus Platform manually. Meanwhile,the platform will be unloaded.\nThank you.\n\nWednus team.");var undefined;W=undefined;return false;}}return true;},
    dkernel:{},
    refresh:function(){var db=this.root;if(window.innerWidth!=null){this.width=window.innerWidth;this.height=window.innerHeight;}else{if(window.opera!=null){this.width=db.clientWidth;this.height=db.clientHeight;}else{if(document.documentElement!=null){this.width=document.documentElement.clientWidth;this.height=document.documentElement.clientHeight;}}}this.width=parseInt(this.width);this.height=parseInt(this.height);this.body.style.width=this.width+"px";this.body.style.height=this.height+"px";},
    scroll:function(isAuto){if(isAuto){document.write("<style>html{overflow-x:auto;overflow-y:auto;}</style>");}else{document.write("<style>html{overflow-x:hidden;overflow-y:hidden;overflow:hidden;}</style>");}document.close();},
    background:function(bg){if(!bg){return;}this.root.style.background=bg;},
    init:function(){for(var i in window){W.names+=i+",";}this.body=document.createElement("div");this.body.style.display="inline";if(this.path==""){this.autopath();}if(!document.body){document.write("<div id=\"_wednus_platform_\" style=\"display:none;position:absolute;\">.</div>");this.root=document.body;}this.root.appendChild(this.body);this.code=document.createElement("textarea");this.code.style.display="none";this.root.appendChild(this.code);this.scroll(false);this.refresh();},
    width:993,
    height:525,
    check_namespace:function(){},
    names:"undefinedgetInterface,window,W,document,navigator,Packages,sun,java,netscape,XPCNativeWrapper,GeckoActiveXObject,Components,parent,top,scrollbars,name,scrollX,scrollY,scrollTo,scrollBy,getSelection,scrollByLines,scrollByPages,sizeToContent,prompt,dump,setTimeout,setInterval,clearTimeout,clearInterval,setResizable,captureEvents,releaseEvents,routeEvent,enableExternalCapture,disableExternalCapture,open,openDialog,frames,find,self,screen,history,content,menubar,toolbar,locationbar,personalbar,statusbar,directories,closed,crypto,pkcs11,controllers,opener,status,defaultStatus,innerWidth,innerHeight,outerWidth,outerHeight,screenX,screenY,pageXOffset,pageYOffset,scrollMaxX,scrollMaxY,length,fullScreen,alert,confirm,focus,blur,back,forward,home,stop,print,moveTo,moveBy,resizeTo,resizeBy,scroll,close,updateCommands,atob,btoa,frameElement,removeEventListener,dispatchEvent,getComputedStyle,",
    body:{},
    code:{},
    events:{},
    event:function(source,event,func,arg1){var task;if(!W.events[source]){W.events[source]={};}if(!W.events[source][event]){W.events[source][event]=[];source[event]=(function(){for(var i=0;i<W.events[source][event].length;++i){task=W.events[source][event][i];task[0](task[1]);}});}W.events[source][event][W.events[source][event].length]=[func,arg1];},
    c:{},
    a:{},
    u:{},
    include:function(subpath,name){this.load(subpath,name,"include");},
    include_css:function(subpath,name){this.css(this.path+subpath+"/"+name+".css");},
    control:function(name){this.load("control/"+name,name,"control");},
    module:function(name){this.load("module/"+name,name,"module");},
    snippet:function(name){this.load("snippet/"+name,name,"snippet");},
    app:function(name,args){this.load("app/"+name,name,"app");this.event(window,"onload",(function(){W.a[name](args);}));},
    style:function(obj,wss){if(typeof obj=="string"){obj=document.createElement(obj);}var s=obj.style;var tmp,latestProp;if(!wss){return obj;}wss=wss.split(";");for(var i=0;i<wss.length;++i){tmp=wss[i].split(":");if(typeof tmp[1]=="undefined"){s[tmp[0]]=latestProp;}else{s[tmp[0]]=latestProp=tmp[1];}}return obj;},
    loader:{},
    request:function(url,callback){var jump=this.loader;jump.src=url;jump.onload=(function(){var data=jump.contentDocument?jump.contentDocument.body.innerHTML:jump.contentWindow.document.body.innerHTML;data=data.replace(/(<([^>]+)>)/gi,"");if(callback!=null){callback(data);}});},
    proxy_url:"http://audreybear.ph.utexas.edu/~sundew/wrs.php",
    proxy:function(url,callback){if(!callback){callback="";}W.js(W.proxy_url+"?callback="+callback+"&url="+escape(url));},
    opener:{},
    open:function(url){if(!this.opener.isStarted){W.style(W.opener,"width:100%;height:"+W.height+"px;display:block");W.event(window,"onresize",(function(){W.refresh();W.opener.style.height=W.height+"px";}));this.opener.isStarted=true;}var isLoaded=false;W.opener.src=W.path+"module/dkernel/lib/loading.html";W.opener.onload=(function(){load();});W.opener.onreadystatechange=(function(){if(this.readyState=="complete"){load();}});function load(){if(!isLoaded){W.opener.src=url;isLoaded=true;}}},
    close:function(){W.opener.style.display="none";W.opener.isStarted=false;},
    wrap:function(obj){var wrapper=document.createElement("div");wrapper.id="_wednus_wrapper_";W.style(wrapper,"position:absolute;width:100%;height:100%;display:block;overflow:auto;");wrapper.appendChild(obj);document.body.appendChild(wrapper);},
    write:function(str){W.style(W.body,"width:100%;height:100%;position:absolute;overflow:auto;");W.body.innerHTML=str;},
    clone:function(){this.code.value=this;return this.code.value;},
    toString:function(isDebug){return this.serialize(this,false);},
    serialize:function(obj,isDebug){if(!isDebug){isDebug=false;}var lineBreak="";var tab="";if(isDebug){lineBreak="\n";tab=" ";}var str="{"+lineBreak;var first=true;for(var i in obj){if(first){first=false;}else{str+=","+lineBreak;}str+=tab+i+":";switch(typeof obj[i]){case "string":str+="\""+obj[i]+"\"";break;case "function":if(i=="js"){str+="function(url){document.write(\"<script type='text/javascript' src='\"+url+\"'><\\/script>\");}";break;}var s="";s+=obj[i];s=s.replace(/\s+/g," ");s=s.replace(/^\s(.*)/,"$1");s=s.replace(/(.*)\s$/,"$1");s=s.replace(/\s([\x21\x25\x26\x28\x29\x2a\x2b\x2c\x2d\x2f\x3a\x3b\x3c\x3d\x3e\x3f\x5b\x5d\x5c\x7b\x7c\x7d\x7e])/g,"$1");str+=s.replace(/([\x21\x25\x26\x28\x29\x2a\x2b\x2c\x2d\x2f\x3a\x3b\x3c\x3d\x3e\x3f\x5b\x5d\x5c\x7b\x7c\x7d\x7e])\s/g,"$1");break;case "object":str+=W.json.stringify(obj[i]);break;default:str+=obj[i];}}return str+lineBreak+"}";},
    removeComments:function(s){var lines,i,t;lines=s.split("\n");t="";for(i=0;i<lines.length;i++){t+=lines[i].replace(/([^\x2f]*)\x2f\x2f.*$/,"$1");}t=t.replace(/(.*)\n(.*)/g,"$1 $2");lines=t.split("*/");t="";for(i=0;i<lines.length;i++){t+=lines[i].replace(/(.*)\x2f\x2a(.*)$/g,"$1 ");}return t;},
    json:{},
    dev:{},
    EReporter:function(args){var self=this;this.name="EReporter";this.version="0.0.1";args=args?args:{};this.verbose=args.verbose?args.verbose:false;this.server=args.server?args.server:null;this.target=args.target?args.target:"_blank";this.ignore=args.ignore?args.ignore:"Generated_Error";this.core=document.createElement("form");this.core.method="post";this.core.action=this.server;W.root.appendChild(this.core);this.fields={};var fields="message,username,subject,topic_desc,post,mode".split(",");var tmp;for(var i=0;i<fields.length;++i){this.fields[fields[i]]=document.createElement("input");tmp=this.fields[fields[i]];tmp.name=fields[i];tmp.type="hidden";this.core.appendChild(tmp);}this.fields.post.value="Submit";this.fields.mode.value="newtopic";this.info="";this.message="";this.reporter=W.version.split("_");this.reporter=this.reporter[1];this.onerror=(function(msg,url,linenumber){if(msg.indexOf(self.ignore)!=-1||url.indexOf(self.ignore)!=-1){self.report_test();return;}composeInfo(msg,url,linenumber);if(self.verbose){if(isOK()){moreInfo();if(self.target!="_blank"){self.core.target=self.target;W.loader.onload=(function(){alert("Thanks for submission.\n\n"+W.loader.src);});}}else{return;}}fillupFields(msg);self.onreport(this.message);return true;});this.report=(function(moreInfo){if(moreInfo){this.info+=moreInfo;}self.core.submit();});this.onreport=(function(message){self.report();});this.report_test=(function(){var message="[WEDNUS]EReporter control\n\n\n";message+="This testing report will not be sent to the listener.\n\nThanks.";alert(message);});function addbb(entry){if(!this.message){this.message="";}this.message+=entry+"\n\n";return "[list][*]"+entry+"[/list]";}function composeInfo(msg,url,linenumber){this.info=addbb("Version:"+W.version);this.info+=addbb("Error:"+msg);this.info+=addbb("Location:"+url+"(Line:"+linenumber+")");this.info+=addbb("Agent:"+navigator.userAgent);}function fillupFields(msg){self.fields.message.value=this.info;self.fields.username.value=this.reporter;self.fields.subject.value=msg;self.fields.topic_desc.value=navigator.userAgent;}function isOK(){var message="[WEDNUS]";message+="An Internal Error Detected.\n\n\n\n";message+=this.message;message+="\n\n\n\nThis error could be either from the Wednus System or other scripts in the host page.\n\n";message+="In either case,I hope you to report this error to the Wednus community for future development.\n\n";message+="During the reporting process,only the information above will be sent to server.\n\n\n\n\n\n";message+="Would you kindly continue to report this error?";return confirm(message);}function moreInfo(){var situation=prompt("Would you please describe this situation?\n\nWithout this info,we cannot help you efficiently.");if(!situation){situation="?";}this.info+=addbb("Situation:"+situation);var reporter=prompt("Email and/or Name please,so that I can direct my support to you.\n\n(after this dialog,please wait 3~5 seconds to finish reporting)");if(reporter!=""){this.reporter=reporter;}}},
    top:0,
    left:0,
    children:[{}],
    wednusify:function(obj){var wobj={};wobj.core=obj.core?obj.core:obj;wobj.body=obj.body?obj.body:document.createElement("div");wobj.wps=obj.wps?obj.wps:detect(obj);function detect(obj){var s=obj.style?obj.style:{};return parseInt(s.width?s.width:"100%")+","+parseInt(s.height?s.height:"100%")+",left:"+parseInt(s.left?s.left:"xcenter:0")+",top:"+parseInt(s.top?s.top:"ycenter:0");}return wobj;},
    is_wednusified:function(obj){return(typeof obj.body=="object")&&(typeof obj.core=="object")&&(typeof obj.wps=="string");},
    add:function(obj,parent){if(obj.constructor==Array){for(var i=0;i<obj.length;++i){this.add(obj[i],parent);}return;}if(!this.is_wednusified(obj)){obj=this.wednusify(obj);}if(obj.core.style!=null){if(obj.core.style.width==""){obj.core.style.width="100%";}if(obj.core.style.height==""){obj.core.style.height="100%";}}if(obj.core.appendChild!=null&&obj.body!==obj.core){obj.body.appendChild(obj.core);}obj.body.style.position="absolute";if(typeof parent!="undefined"){if(!this.is_wednusified(parent)){parent=this.add(parent);}parent.children=[];parent.onresize=(function(){W.repos(this);});}else{parent=W;}obj.parent=parent;parent.children[parent.children.length]=obj;if(this.wom!=null){this.wom(obj);}if(obj.onload!=null){W.event(window,"onload",obj.onload);}this.repos(parent);parent.body.appendChild(obj.body);return obj;},
    repos:function(parent){var self=this;W.refresh();if(typeof parent=="undefined"){parent=W;}var children=parent.children;for(var i=0;i<children.length;++i){wps(children[i]);}function wps(obj){var wps=obj.wps.split(",");var os=obj.body.style;var ps=obj.parent.body.style;var tmp=wps[0].split("%");var tmp2;if(tmp.length==2){os.width=getAbsSize(ps.width,tmp[0])+"px";}else{os.width=parseInt(tmp[0])+"px";}tmp=wps[2].split(":");tmp2=tmp[1].split("%");if(tmp2.length==2){os.left=(getAbsSize(ps.width,tmp2[0])+1)+"px";}else{os.left=getpos(obj,wps[2])+"px";}tmp=wps[1].split("%");if(tmp.length==2){os.height=getAbsSize(ps.height,tmp[0])+"px";}else{os.height=parseInt(tmp[0])+"px";}tmp=wps[3].split(":");tmp2=tmp[1].split("%");if(tmp2.length==2){os.top=(getAbsSize(ps.height,tmp2[0])+1)+"px";}else{os.top=getpos(obj,wps[3])+"px";}if(obj.onresize!=null){obj.onresize();}function getAbsSize(px,perc){return Math.floor(parseInt(px)*(perc/100));}function getpos(child,pos){if(typeof pos=="undefined"){return;}var pWidth=parseInt(child.parent.body.style.width);var pHeight=parseInt(child.parent.body.style.height);var offset=0;var s=child.body.style;pos=pos.split(":");switch(pos[0]){case "top":offset=parseInt(pos[1]);break;case "ycenter":offset=(pHeight/2)-(parseInt(s.height)/2)+parseInt(pos[1]);break;case "bottom":offset=(pHeight-parseInt(s.height))+parseInt(pos[1]);break;case "left":offset=parseInt(pos[1]);break;case "xcenter":offset=(pWidth/2)-(parseInt(s.width)/2)+parseInt(pos[1]);break;case "right":offset=pWidth-parseInt(s.width)+parseInt(pos[1]);break;default:;}return Math.floor(offset);}}},
    FormGen:function(args){var self=this;this.name="FormGen";this.version="0.1.0";var def={scroll:false,target:"_self",method:"post",action:"#",defTag:"input",defType:"text",caption:"submit",color:"white",background:"",labelColumeWidth:"80px",showSubmitButton:true,wss:"fontSize:11px;fontFamily:Tahoma,Verdana",wps:"80%,80%,xcenter:0,ycenter:0"};if(args){for(var i in def){args[i]=args[i]?args[i]:def[i];}}else{args=def;}for(var i in def){self[i]=self[i]?self[i]:args[i];}this.fields=[];var fieldNodes=[];this.length=0;this.remove=(function(id){var id=getIndex(id);self.fields[id]=self.fields[self.length-1];self.table.removeChild(fieldNodes[id]);fieldNodes[id]=fieldNodes[self.length-1];--self.length;});this.set=(function(id,value){var id=getIndex(id);self.fields[id].value=value;return self.fields[id].value;});this.get=(function(id){var id=getIndex(id);if(id==-1){return null;}return self.fields[id].value;});this.submit=(function(){self.core.submit();});function getIndex(id){for(var i=0;i<self.length;++i){if(self.fields[i].id==id){return i;}}return-1;}this.core=document.createElement("form");this.core.method=this.method;this.core.action=this.action;this.core.target=this.target;this.body=W.style("div","background:"+this.background);this.table=W.style("table","width:100%;"+this.wss);this.table.style.background=this.color;W.style(this.table,this.wss);this.tbody=document.createElement("tbody");this.table.appendChild(this.tbody);this.core.appendChild(this.table);if(!this.scroll){this.body.style.overflow="hidden";}else{this.body.style.overflow="auto";}this.add=(function(args){var def={id:self.length,name:self.length,className:self.length,tag:self.defTag,type:self.defType,value:"",caption:self.length,width:"100%",labelBorder:"0px",fieldBorder:"1px",color:"white",tooltip:"please enter "+self.caption+" here."};if(args){for(var i in def){args[i]=args[i]?args[i]:def[i];}}else{args=def;}var field=W.style(args.tag,"width:"+args.width+";borderWidth:"+args.fieldBorder+";background:"+args.color);field.id=args.id;field.name=args.name;field.className=args.className;field.tooltip=args.tooltip;field.value=args.value;field.onclick=(function(){this.focus();if(this.select){this.select();}});W.style(field,self.wss);var tr=document.createElement("tr");var td_caption=document.createElement("td");td_caption.style.width="1px";var label=document.createElement("input");label.value=" "+args.caption;label.readOnly=true;label.style.cursor="default";label.style.width=self.labelColumeWidth;label.onfocus=(function(){field.focus();});W.style(label,self.wss+";borderWidth:"+args.labelBorder+";background:"+self.color);td_caption.appendChild(label);W.style(td_caption,self.wss);tr.appendChild(td_caption);var td_field=document.createElement("td");td_field.appendChild(field);tr.appendChild(td_field);self.tbody.appendChild(tr);self.fields[self.length]=field;fieldNodes[self.length]=tr;++self.length;return field;});this.sbutton=W.style("input",this.wss);this.sbutton.type="button";this.sbutton.value=this.caption;this.sbutton.onclick=(function(){self.submit();});if(this.showSubmitButton){this.core.appendChild(this.sbutton);}this.onload=(function(){});W.add(this);},
    scavenger:{},
    wom:function(obj){obj.moveTo=(function(x,y){obj.body.style.left=parseInt(x)+"px";obj.body.style.top=parseInt(y)+"px";this.onmove();});obj.moveBy=(function(x,y){obj.body.style.left=(parseInt(obj.body.style.left)+parseInt(x))+"px";obj.body.style.top=(parseInt(obj.body.style.top)+parseInt(y))+"px";this.onmove();});obj.resizeTo=(function(width,height){obj.body.style.width=parseInt(width)+"px";obj.body.style.height=parseInt(height)+"px";this.onresize();});obj.resizeBy=(function(width,height){obj.body.style.width=(parseInt(obj.body.style.width)+parseInt(width))+"px";obj.body.style.height=(parseInt(obj.body.style.height)+parseInt(height))+"px";this.onresize();});obj.open=(function(){obj.body.style.display="block";});obj.close=(function(){obj.body.style.display="none";});obj.hide=(function(){obj.body.style.visibility="hidden";});obj.show=(function(){obj.body.style.visibility="visible";});obj.move=(function(wps){obj.wps=wps;W.repos(obj.parent);this.onmove();});obj.body.onclick=(function(){obj.onclick();});obj.body.ondblclick=(function(){obj.ondblclick();});obj.body.onmouseup=(function(){obj.onmouseup();});obj.body.onmouseout=(function(){obj.onmouseout();});obj.body.onmouseover=(function(){obj.onmouseover();});obj.body.onmousemove=(function(){obj.onmousemove();});obj.body.onblur=(function(){obj.onblur();});obj.body.onfocus=(function(){obj.onfocus();});obj.body.onunload=(function(){obj.onunload();});obj.body.ondragdrop=(function(){obj.ondragdrop();});obj.onclick=(function(){});obj.ondblclick=(function(){});obj.onmouseup=(function(){});obj.onmouseout=(function(){});obj.onmouseover=(function(){});obj.onmousemove=(function(){});obj.onblur=(function(){});obj.onfocus=(function(){});obj.onmove=(function(){});obj.onresize=(function(){});obj.onunload=(function(){});obj.ondragdrop=(function(){});return obj;},
    Analytics:function(acct_no,isPending,mode){this.version="0.0.1";this.name="Analytics";_uacct=acct_no?acct_no:"UA-103181-8";_userv=mode?mode:1;this.start=(function(){urchinTracker();});if(!isPending){this.start();}},
    DragMe:function(target){var self=this;this.version="0.0.1";this.name="DragMe";var handle=-1;this.xoffset=this.yoffset=0;this.core=target.body?target.body:target;if(!this.core.appendChild){return;}this.core.style.position="absolute";this.core.style.cursor="move";this.core.title="move";this.core.onmousedown=(function(evt){var e=evt||event;document.onmousemove=transform;self.xoffset=parseInt(this.style.left)-e.clientX;self.yoffset=parseInt(this.style.top)-e.clientY;handle=this;});document.onmouseup=(function(){document.onmousemove=new Function();handle=-1;});function transform(evt){var e=evt||event;if(!handle){return;}var top=e.clientY+self.yoffset;var left=e.clientX+self.xoffset;self.ondrag(top,left);self.core.style.top=top+"px";self.core.style.left=left+"px";}this.ondrag=(function(top,left){});this.ondrop=(function(top,left){});}
})
</textarea>
</body>
</html>