<?xml version="1.0" encoding="UTF-8" ?>
<Module>
   <ModulePrefs
       title="DOM Dock"
       description="Browse through the DOM structure with idendifier, and parse the target object and dock into the blank host page."
       author="Sundew H. Shin"
       author_email="sundew@wednus.com"
       author_affiliation="Wednus Inc."
       author_location="Austin, TX"
       height="200"
       title_url=""
       screenshot=""
       thumbnail=""
       category="DOM"
       category2=""
       >
    <Require feature="dynamic-height" />
  </ModulePrefs>
<UserPref name="url" display_name="URL" default_value="http://http://wednus.com/Main_Page"/>
<UserPref name="id" display_name="ID" default_value="p-navigation"/>
  <Content type="html">
  <![CDATA[
    <div id="content_div"></div>
    <script type="text/javascript">
      // get prefs
      var prefs = new gadgets.Prefs();
      var url = prefs.getString("url");
      var id = prefs.getString("id");

      function makeDOMRequest() {
        var params = {};
        params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.DOM;
        gadgets.io.makeRequest(url, response, params);
      };

      function response(obj) {
        alert(obj.innerHTML);
        var target = obj.getElementById(id);
        var wrapper = document.getElementById('content_div');
        wrapper.innerHTML = target.innerHTML;
        //wrapper.appendChild(target);
      };

    gadgets.util.registerOnLoadHandler(makeDOMRequest);
    </script>
  ]]>
  </Content>
</Module>