<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Wednus DKernel: module/debug.js Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_b2ec61511616f1e474496271d272c764.html">module</a></div>
<h1>debug.js</h1><a href="debug_8js.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00023"></a><a class="code" href="group__wed.html#g97760e7b1998a66260d060ca88008476">00023</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.mesg = '';
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 
<a name="l00030"></a><a class="code" href="group__wed.html#gf3f31db1bd244f5a5c76b8b4ad7769e5">00030</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.numCases = 0;
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00037"></a><a class="code" href="group__wed.html#g59569a5c3b682c6dc3d5decb2389d4e8">00037</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.numErrors = 0;
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 
<a name="l00045"></a><a class="code" href="group__wed.html#g7d597fdecbe507062c7d2b151c439e24">00045</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.debug = function(title, message){
<a name="l00046"></a>00046     alert('[WEDNUS] '+ title +':\n\n'+ message);
<a name="l00047"></a>00047 };
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00055"></a><a class="code" href="group__wed.html#gfe74121a5ae7e6162067c2cea707068d">00055</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.error = function(where, what){
<a name="l00056"></a>00056     alert(what +<span class="charliteral">'\n'</span>+ where);
<a name="l00057"></a>00057 };
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 
<a name="l00070"></a><a class="code" href="group__wed.html#g110c3fd30d20e4cee53945c09508bab6">00070</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.assert = function(a, b, comment){
<a name="l00071"></a>00071     <span class="keywordflow">if</span>(typeof b == 'string')
<a name="l00072"></a>00072         b = b.toLowerCase();
<a name="l00073"></a>00073     var msg = '';
<a name="l00074"></a>00074     <span class="keywordflow">if</span>(typeof comment != 'undefined')
<a name="l00075"></a>00075         msg += '- '+ comment +<span class="charliteral">'\n'</span>;
<a name="l00076"></a>00076     <span class="keywordflow">if</span>(a != b){
<a name="l00077"></a>00077         <span class="keyword">this</span>.debug('Assertion Failed', msg +'expects :\t\''+ a +<span class="charliteral">'\'</span>\ngot:\t\''
<a name="l00078"></a>00078             + b +<span class="charliteral">'\''</span>);
<a name="l00079"></a>00079         <span class="keywordflow">return</span> 0;
<a name="l00080"></a>00080     }<span class="keywordflow">else</span> <span class="keywordflow">return</span> 1;
<a name="l00081"></a>00081 };
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 
<a name="l00085"></a><a class="code" href="group__wed.html#g9b970bec627d2c173a598ab04bbd49ef">00085</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.dump = function(obj){
<a name="l00086"></a>00086     <span class="keywordflow">for</span>(var i in obj){
<a name="l00087"></a>00087        document.write(<span class="charliteral">'['</span>+ i +']&lt;br&gt;'+ obj[i]);
<a name="l00088"></a>00088        document.write('&lt;br&gt;&lt;br&gt;');
<a name="l00089"></a>00089     }
<a name="l00090"></a>00090     document.close();
<a name="l00091"></a>00091 };
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
<a name="l00101"></a><a class="code" href="group__wed.html#g17aa0578d82694ec4513799673387728">00101</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.dumpobj = function(obj){
<a name="l00102"></a>00102     var c = '&lt;table style=<span class="stringliteral">"color:#000000;background-color:#f1f1f1;font-size:10px;';</span>
<a name="l00103"></a>00103 <span class="stringliteral">    c += 'font-family:Tahoma,verdana,arial"</span> cellspacing=<span class="stringliteral">"0"</span> border=<span class="stringliteral">"1"</span> width=<span class="stringliteral">"100%"</span> ';
<a name="l00104"></a>00104     c += 'cellpadding=<span class="stringliteral">"3"</span>&gt;&lt;tr&gt;&lt;th align=<span class="stringliteral">"left"</span> valign=<span class="stringliteral">"top"</span>&gt;Property&lt;/th&gt;';
<a name="l00105"></a>00105     c += '&lt;th align=<span class="stringliteral">"left"</span> valign=<span class="stringliteral">"top"</span>&gt;Value&lt;/th&gt;&lt;/tr&gt;';
<a name="l00106"></a>00106     <span class="keywordflow">for</span>(var i in obj)
<a name="l00107"></a>00107         <span class="keywordflow">if</span>(i != 'innerHTML' &amp;&amp; i != 'outerHTML' &amp;&amp; i != 'filters'){
<a name="l00108"></a>00108             c += '&lt;tr&gt;&lt;td&gt;'+ i +'&lt;/td&gt;&lt;td&gt;'+ obj[i] + '&amp;nbsp;&lt;/td&gt;';
<a name="l00109"></a>00109         }
<a name="l00110"></a>00110     c += '&lt;/table&gt;';
<a name="l00111"></a>00111     <span class="keywordflow">return</span> c;
<a name="l00112"></a>00112 };
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 
<a name="l00127"></a><a class="code" href="group__wed.html#g2b205c67d671eba6d5ddec07effb430a">00127</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.test = function(pred, title){
<a name="l00128"></a>00128     ++<span class="keyword">this</span>.numCases;
<a name="l00129"></a>00129     <span class="keywordflow">if</span>(typeof pred == 'string')
<a name="l00130"></a>00130         pred = confirm(pred);
<a name="l00131"></a>00131     <span class="keyword">this</span>.mesg += '&lt;li&gt;Testing <span class="stringliteral">"'+ title +'"</span> . . . . . . . . . . . . . . . . . ';
<a name="l00132"></a>00132     <span class="keywordflow">if</span>(!pred){
<a name="l00133"></a>00133         ++<span class="keyword">this</span>.numErrors;
<a name="l00134"></a>00134         <span class="keyword">this</span>.mesg += '&lt;font color=<span class="stringliteral">"red"</span>&gt;&lt;b&gt;[failed]&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;';
<a name="l00135"></a>00135     }<span class="keywordflow">else</span> <span class="keyword">this</span>.mesg +='&lt;font color=<span class="stringliteral">"navy"</span>&gt;&lt;b&gt;[passed]&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;';
<a name="l00136"></a>00136 };
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 
<a name="l00147"></a><a class="code" href="group__wed.html#g55a5a19da0a14b701b652617de25cf58">00147</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.Timer = function(){var <span class="keyword">self</span> = <span class="keyword">this</span>;
<a name="l00148"></a>00148     var startDate, pauseDate;
<a name="l00149"></a>00149     <span class="keyword">this</span>.pausedTime = 0;
<a name="l00150"></a>00150     <span class="keyword">this</span>.start = function(){
<a name="l00151"></a>00151         <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.mesg += 'Test started on '+ (<span class="keyword">new</span> Date) +'&lt;ul&gt;';
<a name="l00152"></a>00152         <span class="keyword">this</span>.startDate = <span class="keyword">new</span> Date;
<a name="l00153"></a>00153     };
<a name="l00154"></a>00154     <span class="keyword">this</span>.finish = function(){
<a name="l00155"></a>00155         var elapsedTime = (<span class="keyword">new</span> Date) - <span class="keyword">self</span>.startDate - <span class="keyword">self</span>.pausedTime;
<a name="l00156"></a>00156         <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.mesg += '&lt;/ul&gt;';
<a name="l00157"></a>00157         <span class="keywordflow">if</span>(<a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.numCases != 0)
<a name="l00158"></a>00158         <span class="keywordflow">if</span>(!<a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.numErrors){
<a name="l00159"></a>00159             <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.mesg += '&lt;font color=<span class="stringliteral">"navy"</span>&gt;&lt;b&gt;Congratulations!  It passed all '
<a name="l00160"></a>00160                          + <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.numCases +' <a class="code" href="group__wed.html#g2b205c67d671eba6d5ddec07effb430a">test</a> <span class="keywordflow">case</span>(s).&lt;/b&gt;&lt;/font&gt;&lt;br&gt;';
<a name="l00161"></a>00161         }<span class="keywordflow">else</span> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.mesg += '&lt;font color=<span class="stringliteral">"red"</span>&gt;&lt;b&gt;Sorry.  It failed at '+ <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.numErrors
<a name="l00162"></a>00162                               +' <a class="code" href="group__wed.html#g2b205c67d671eba6d5ddec07effb430a">test</a> <span class="keywordflow">case</span>(s).&lt;/b&gt;&lt;/font&gt;&lt;br&gt;';
<a name="l00163"></a>00163         <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.mesg += 'Finished in '+ (elapsedTime / 1000) +' second(s).&lt;br&gt;&lt;br&gt;';
<a name="l00164"></a>00164         <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.mesg += '&lt;a href = <span class="stringliteral">"javascript:history.back()"</span>&gt;Go back &lt;/a&gt;&lt;br&gt;&lt;br&gt;';
<a name="l00165"></a>00165         var target = document;
<a name="l00166"></a>00166         <span class="comment">// for document.write after body is already ready (prevents wiping out contents)</span>
<a name="l00167"></a>00167         <span class="keywordflow">if</span>(<a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.ready){
<a name="l00168"></a>00168             var <a class="code" href="group__wed.html#g7d597fdecbe507062c7d2b151c439e24">debug</a> = document.createElement('iframe');
<a name="l00169"></a>00169             var s = debug.style;
<a name="l00170"></a>00170             s.position = 'absolute';
<a name="l00171"></a>00171             s.top = s.left = s.border = '0px';
<a name="l00172"></a>00172             s.width = '400px';
<a name="l00173"></a>00173             document.body.appendChild(debug);
<a name="l00174"></a>00174             <span class="keywordflow">if</span>(debug.contentDocument){
<a name="l00175"></a>00175                 target = debug.contentDocument;
<a name="l00176"></a>00176             }<span class="keywordflow">else</span> target = debug.contentWindow.document;
<a name="l00177"></a>00177         }
<a name="l00178"></a>00178         <span class="comment">// print queued message</span>
<a name="l00179"></a>00179         target.open();
<a name="l00180"></a>00180         target.write(<a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.mesg);
<a name="l00181"></a>00181         target.close();
<a name="l00182"></a>00182 
<a name="l00183"></a>00183         <span class="comment">// flush out</span>
<a name="l00184"></a>00184         <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.mesg = '';
<a name="l00185"></a>00185     };
<a name="l00186"></a>00186     <span class="keyword">this</span>.pause = function(){
<a name="l00187"></a>00187         <span class="keyword">this</span>.pauseDate = <span class="keyword">new</span> Date;
<a name="l00188"></a>00188     };
<a name="l00189"></a>00189     <span class="keyword">this</span>.resume = function(){
<a name="l00190"></a>00190         <span class="keyword">self</span>.pausedTime += (<span class="keyword">new</span> Date) - <span class="keyword">this</span>.pauseDate;
<a name="l00191"></a>00191     };
<a name="l00192"></a>00192 };
<a name="l00193"></a>00193 
<a name="l00199"></a><a class="code" href="group__wed.html#gdc0b77b893271a71a7d16e342e4c4e3c">00199</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.modules.toString = function(){
<a name="l00200"></a>00200     var str = '';
<a name="l00201"></a>00201     <span class="keywordflow">for</span>(var i in <span class="keyword">this</span>){
<a name="l00202"></a>00202         <span class="keywordflow">if</span>(i != '<a class="code" href="group__wed.html#gdc0b77b893271a71a7d16e342e4c4e3c">toString</a>'){
<a name="l00203"></a>00203             str += i +': ';
<a name="l00204"></a>00204             <span class="keywordflow">for</span>(var j = 0; j &lt; <span class="keyword">this</span>[i].length; ++j){
<a name="l00205"></a>00205                 str += <span class="keyword">this</span>[i][j] +<span class="charliteral">','</span>;
<a name="l00206"></a>00206             }
<a name="l00207"></a>00207             str += ' | ';
<a name="l00208"></a>00208         }
<a name="l00209"></a>00209     }
<a name="l00210"></a>00210     <span class="keywordflow">return</span> str;
<a name="l00211"></a>00211 };
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 
<a name="l00220"></a><a class="code" href="group__wed.html#g996c48cca043b8290a5817b685aec4ac">00220</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.wait = function(millis){
<a name="l00221"></a>00221     date = <span class="keyword">new</span> Date();
<a name="l00222"></a>00222     var curDate = null;
<a name="l00223"></a>00223     <span class="keywordflow">do</span>{
<a name="l00224"></a>00224         var curDate = <span class="keyword">new</span> Date();
<a name="l00225"></a>00225     }<span class="keywordflow">while</span>(curDate-date &lt; millis);
<a name="l00226"></a>00226 };
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00234"></a><a class="code" href="group__wed.html#ge74b8d90ddb7c148b81bbb61a29d7703">00234</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.halt = function(isBroadcast){
<a name="l00235"></a>00235     var undefined;
<a name="l00236"></a>00236     <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a> = undefined;
<a name="l00237"></a>00237     <span class="keywordflow">if</span>(isBroadcast){
<a name="l00238"></a>00238         document.write('Wednus Platform has halted.');
<a name="l00239"></a>00239         document.write('&lt;br&gt;&lt;br&gt;');
<a name="l00240"></a>00240         <span class="keywordflow">for</span>(var i in window)
<a name="l00241"></a>00241             document.write(i +', ');
<a name="l00242"></a>00242         document.close();
<a name="l00243"></a>00243     }
<a name="l00244"></a>00244 };
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 
<a name="l00250"></a><a class="code" href="group__wed.html#g05000bbf397fca60d64dc0e003371327">00250</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.check_namespace = function(){
<a name="l00251"></a>00251     var newNames = '';
<a name="l00252"></a>00252     <span class="comment">// BUG: THis thing doesn't work in IE</span>
<a name="l00253"></a>00253     <span class="keywordflow">for</span>(var i in window){
<a name="l00254"></a>00254         <span class="comment">// search W.names string</span>
<a name="l00255"></a>00255         <span class="keywordflow">if</span>(!<span class="keyword">this</span>.names.match(i +<span class="charliteral">','</span>)){  <span class="comment">// mask out default namespaces under 'window'</span>
<a name="l00256"></a>00256             <span class="keywordflow">if</span>(<span class="keyword">this</span>.namespaces[i]){
<a name="l00257"></a>00257                 <span class="keywordflow">if</span>(!isSame(<span class="keyword">this</span>.namespaces[i], window[i])){
<a name="l00258"></a>00258                     <a class="code" href="group__wed.html#g97760e7b1998a66260d060ca88008476">mesg</a>('<span class="keyword">namespace</span> confliction detected.', '<span class="keyword">namespace</span>: '+ i);
<a name="l00259"></a>00259                     <span class="keywordflow">break</span>;
<a name="l00260"></a>00260                 }<span class="comment">//else alert('namespace, '+ i +' has conflicted.\nregistered:'+ this.namespaces[i] +'\nnew:'+ window[i]);</span>
<a name="l00261"></a>00261             }<span class="keywordflow">else</span>{
<a name="l00262"></a>00262                 newNames += i;
<a name="l00263"></a>00263                 newNames += <span class="charliteral">','</span>;
<a name="l00264"></a>00264                 <span class="keyword">this</span>.namespaces[i] = window[i];
<a name="l00265"></a>00265             }
<a name="l00266"></a>00266         }<span class="comment">//else alert(i +' - exist');</span>
<a name="l00267"></a>00267     }
<a name="l00268"></a>00268     <span class="keywordflow">if</span>(newNames != '')
<a name="l00269"></a>00269         <a class="code" href="group__wed.html#g97760e7b1998a66260d060ca88008476">mesg</a>('<span class="keyword">namespace</span> introduced', '<span class="keyword">new</span> namespaces: '+ newNames);
<a name="l00270"></a>00270 
<a name="l00271"></a>00271     function <a class="code" href="group__wed.html#g97760e7b1998a66260d060ca88008476">mesg</a>(title, message){alert('[WEDNUS] '+ title +':\n\n'+ message);};
<a name="l00272"></a>00272     function isSame(source, target){
<a name="l00273"></a>00273         <span class="keywordflow">if</span>(typeof source != typeof target){
<a name="l00274"></a>00274             _alert(source, target);
<a name="l00275"></a>00275             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00276"></a>00276         }
<a name="l00277"></a>00277         <span class="comment">// base case</span>
<a name="l00278"></a>00278         <span class="keywordflow">if</span>(typeof source != 'object'){
<a name="l00279"></a>00279             <span class="keywordflow">if</span>(source +'' != target +'')
<a name="l00280"></a>00280                _alert(source, target, 'defferent value');
<a name="l00281"></a>00281             <span class="keywordflow">return</span> source +'' == target +'';
<a name="l00282"></a>00282         }
<a name="l00283"></a>00283         <span class="comment">// n-cases</span>
<a name="l00284"></a>00284         <span class="keywordflow">for</span>(var i in source){
<a name="l00285"></a>00285             <span class="keywordflow">if</span>(typeof source[i] == 'object')
<a name="l00286"></a>00286                 <span class="keywordflow">return</span> isSame(source[i], target[i]);
<a name="l00287"></a>00287             <span class="keywordflow">if</span>(source[i] +'' != target[i] +''){
<a name="l00288"></a>00288                 _alert(source[i], target[i], 'defferent value');
<a name="l00289"></a>00289                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00290"></a>00290             }
<a name="l00291"></a>00291         }
<a name="l00292"></a>00292         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00293"></a>00293 
<a name="l00294"></a>00294         <span class="comment">// for debugging</span>
<a name="l00295"></a>00295         function _alert(a, b, <a class="code" href="group__wed.html#g97760e7b1998a66260d060ca88008476">mesg</a>){
<a name="l00296"></a>00296             alert('reason: '+ <a class="code" href="group__wed.html#g97760e7b1998a66260d060ca88008476">mesg</a> +'\n\n[source]\n'+ a +'\n\n[target]\n'+ b);
<a name="l00297"></a>00297         };
<a name="l00298"></a>00298     };
<a name="l00299"></a>00299 };
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 
<a name="l00306"></a><a class="code" href="group__wed.html#g644ccc2811089c55fba26e6c61ef5675">00306</a> <a class="code" href="wednus_8js.html#0b02f09bf5aa8ca34f72487f7d0e6e63">W</a>.toString = function(){
<a name="l00307"></a>00307     <span class="keywordflow">return</span> document.body.innerHTML;
<a name="l00308"></a>00308 };
<a name="l00309"></a>00309 
</pre></div><hr size="1"><address style="align: right;"><small>name of web programming challenges. . .&nbsp;
<a href="http://wednus.com">Wednus Project</a></small></address>
